<html>
    <head>
        <title>Best website ever</title>
        <link href="actinsus.css" rel="stylesheet">
    </head>
    <script>
      function loadtheme(){
                if (localStorage.customcolor1 !== undefined){
                document.body.style.backgroundImage = "linear-gradient(135deg, "+ localStorage.customcolor1+", "+localStorage.customcolor2+")";}
            }
      function del(note){
        localStorage.removeItem("text_" + note);
        localStorage.removeItem("titles_" + note);
        localStorage.removeItem("date_" + note);
        localStorage.removeItem("colour_" + note);
        localStorage.removeItem("textcolour_" + note);
        load();
      }
      function load(){
        loadtheme();
        document.getElementById("result").innerHTML = "";
        for (i=0; i <= localStorage.counter; i++){
          if (localStorage.getItem("text_"+ i) == null)
               continue;
          document.getElementById("result").innerHTML += "<p><div id=\"note_" + i + "\"></div></p>";
          document.getElementById("note_" + i).style.padding = 20;
          document.getElementById("note_" + i).style.width = 500;
          document.getElementById("note_" + i).style.margin = 40;
          document.getElementById("note_" + i).style.border = "5px solid";
          document.getElementById("note_" + i).style.borderRadius = "10px";
          document.getElementById("note_" + i).style.borderColor = localStorage.getItem("colour_"+ i);
          const d = new Date(localStorage.getItem("date_"+ i));
          const a = new Date();
          var diff = (Number(d.getTime()) - Number(a.getTime()))/1000/3600/24;
          diff = Math.round(diff);
          if (localStorage.getItem("textcolour_"+ i) === "white"){
            document.getElementById("note_" + i).style.color = '#ffffff';
          }
          else{
            document.getElementById("note_" + i).style.color = '#000000';
          }
          document.getElementById("note_" + i).style.backgroundColor = localStorage.getItem("colour_"+ i);
          document.getElementById("note_" + i).innerHTML += '<h2>'+localStorage.getItem("titles_"+ i)+'</h2><p><i>'+localStorage.getItem("date_"+ i)+'</i> (Number of Days left: '+ diff +')</p><p>'+localStorage.getItem("text_"+ i)+'</p><button onclick="del('+i+')">Delete</button>';
        }

        /* Old code for singular note (For reference):
        var yes = localStorage.colour;
        document.getElementById("result").style.padding = 20;
        document.getElementById("result").style.width = 300;
        document.getElementById("result").style.margin = 40;
        document.getElementById("result").style.border = "5px solid";
        document.getElementById("result").style.borderColor = yes;
        document.getElementById("result").style.borderRadius = "10px";
        if (localStorage.textcolor === "white"){
          document.getElementById("result").style.color = "White";
        }
        else{
          document.getElementById("result").style.color = "Black";
        }
        document.getElementById("result").style.backgroundColor = localStorage.colour;
        document.getElementById("result").innerHTML = '<h2>'+localStorage.titles+'</h2><p><i>'+localStorage.date+'</i></p><p>'+localStorage.text+'</p>';*/
      }

      function onSubmit() {
        counter = 0;
        if (document.getElementById("impostor").value === ""){
          return;
        }
        if (document.getElementById("amogus").value === ""){
          return;
        }
        if (document.getElementById("whenumomsus").value === ""){
          return;
        }
        if (typeof(Storage) !== "undefined") {
          if (localStorage.counter){
            counter = Number( localStorage.counter);
            counter += 1;
            localStorage.counter = counter;
          }
          else{
            localStorage.counter = 0;
          }
          localStorage.setItem('titles_'+ counter, document.getElementById("impostor").value);
          localStorage.setItem("date_"+ counter, document.getElementById("sussy").value);
          localStorage.setItem("colour_"+ counter, document.getElementById("amogus").value);
          localStorage.setItem("textcolour_"+ counter, document.getElementById("woop").value);
          localStorage.setItem("text_"+ counter, document.getElementById("whenumomsus").value);
        } else {
          document.getElementById("result").innerHTML = "Alright so basically u cant use this app now get chrome or other browser that support it and then use this website there, sorry for being bad.";
        }
      }
      </script>

    <body onload="load()">
        <header>
            <div class="container">
              <h1 class="logo">best website ever</h1>
              <nav>
                <ul>
                  <li><a href="#">notes</a></li>
                  <li><a href="stupidwebsite.html">about</a></li>
                  <li><a href="maketrashbetter.html">site preferences</a></li>
                </ul>
              </nav>
            </div>
          </header>
        <h1>notes</h1>
        <p>Create and see your notes down below! If you don't already know how to use it or would like to find out more, visit the About page using the navbar at the top.</p>
        <hr>
        <form>
            <p><label for="impostor">Title:</label>
            <input type="text" id="impostor" name="title" required="true"></p>
            <p><label for="sussy">Date (Optional):</label>
            <input type="date" id="sussy" name="date"></p>
            <p><label for="amogus">Color:</label>
            <input type="color" id="amogus" name="notecolor" required="true"></p>
            <p><label for="woop">Text Color:</label></p>
            <select id="woop" name="textcolor" size="2" multiple>
              <option value="white">White</option>
              <option value="black">Black</option>
            </select>
            <p><label for="whenumomsus">Note text:</label>
            <textarea id="whenumomsus" name="notetext" required="true"></textarea></p>
            <p><button type="reset" id="yes" name="clear">Clear</button>
            <button type="submit" onclick="onSubmit()" id="nolol" name="submitlol">Save Note</button></p>
        </form>
        <p><button onclick="load()" id="venting" name="reloadlol">Reload notes</button></p>
        <div id="result"></div>
        <footer>Made by Leon Zhao 1i3</footer>
    </body>
</html>